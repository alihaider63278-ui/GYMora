<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>GYMora ‚Äì Fitness & AI Coach</title>

<style>
/* ---------- GLOBAL RESET ---------- */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: Arial, Helvetica, sans-serif;
}

body {
    background: #0d1117;
    color: #fff;
    overflow-x: hidden;
}

/* ---------- LAYOUT ---------- */
.container {
    display: flex;
    height: 100vh;
}

/* ---------- SIDEBAR ---------- */
.sidebar {
    width: 70px;
    background: #111827;
    padding: 15px 0;
    display: flex;
    flex-direction: column;
    gap: 18px;
    align-items: center;
}

.sidebar .logo {
    background: linear-gradient(135deg, #8b5cf6, #6366f1);
    width: 42px;
    height: 42px;
    border-radius: 10px;
    font-size: 14px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    letter-spacing: 1px;
}

.sidebar button {
    width: 45px;
    height: 45px;
    border-radius: 12px;
    background: #1f2937;
    border: 1px solid #384152;
    color: #fff;
    font-size: 18px;
    transition: 0.2s;
}

.sidebar button:hover {
    transform: scale(1.1);
    background: #374151;
}

/* ---------- MAIN CONTENT ---------- */
.main {
    flex: 1;
    padding: 25px;
    overflow-y: auto;
}

.section {
    display: none;
}

.section.active {
    display: block;
}

h1 {
    font-size: 28px;
    margin-bottom: 15px;
}

/* BUTTONS */
.btn {
    background: #6366f1;
    padding: 10px 16px;
    border-radius: 10px;
    border: none;
    color: #fff;
    margin-top: 8px;
    font-size: 15px;
    transition: 0.2s;
}

.btn:hover {
    transform: scale(1.05);
}
  /* ---------- WORKOUT CARDS ---------- */
.card {
    background: #111827;
    padding: 18px;
    border-radius: 16px;
    margin-bottom: 20px;
    border: 1px solid #1f2937;
}

.card h2 {
    margin-bottom: 10px;
    font-size: 22px;
}

/* INPUT */
.input {
    width: 100%;
    padding: 10px;
    margin-top: 8px;
    border-radius: 10px;
    border: 1px solid #374151;
    background: #0f172a;
    color: #fff;
}

/* RESULT TEXT */
.result {
    margin-top: 12px;
    font-size: 16px;
    font-weight: bold;
}

/* GRID */
.grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

/* RESPONSIVE */
@media (max-width: 768px) {
    .container {
        flex-direction: row;
    }
    .sidebar {
        width: 65px;
    }
}
</style>
</head>

<body>
<div class="container">

    <!-- SIDEBAR -->
    <div class="sidebar">
        <div class="logo">GYM</div>

        <button onclick="showSection('home')">üè†</button>
        <button onclick="showSection('workout')">üí™</button>
        <button onclick="showSection('calculator')">üßÆ</button>
        <button onclick="showSection('stopwatch')">‚è±Ô∏è</button>
        <button onclick="showSection('bot')">ü§ñ</button>
        <button onclick="toggleTheme()">üåô</button>
    </div>

    <!-- MAIN CONTENT -->
    <div class="main">

        <!-- HOME -->
        <div id="home" class="section active">
            <h1>Welcome to GYMora</h1>
            <p>Your complete AI fitness assistant.</p>
        </div>

        <!-- WORKOUT SECTION -->
        <div id="workout" class="section">
            <h1>Workout Plan</h1>

            <div class="card">
                <h2>Full Body Routine</h2>
                <ul>
                    <li>Push Ups ‚Äî 3 x 15</li>
                    <li>Squats ‚Äî 3 x 20</li>
                    <li>Plank ‚Äî 3 x 60 sec</li>
                    <li>Lunges ‚Äî 3 x 12</li>
                </ul>
            </div>

            <div class="card">
                <h2>HIIT Quick Session</h2>
                <ul>
                    <li>30 sec Jumping Jacks</li>
                    <li>30 sec Burpees</li>
                    <li>30 sec Mountain Climbers</li>
                </ul>
            </div>
        </div>

        <!-- CALCULATOR SECTION -->
        <div id="calculator" class="section">
            <h1>Fitness Calculators</h1>

            <div class="grid">

                <!-- BMI -->
                <div class="card">
                    <h2>BMI Calculator</h2>
                    <input id="bmiWeight" class="input" type="number" placeholder="Weight (kg)">
                    <input id="bmiHeight" class="input" type="number" placeholder="Height (cm)">
                    <button class="btn" onclick="calcBMI()">Calculate</button>
                    <div id="bmiResult" class="result"></div>
                </div>

                <!-- Calorie -->
                <div class="card">
                    <h2>Calorie Intake</h2>
                    <input id="calWeight" class="input" type="number" placeholder="Weight (kg)">
                    <input id="calHeight" class="input" type="number" placeholder="Height (cm)">
                    <input id="calAge" class="input" type="number" placeholder="Age">
                    <button class="btn" onclick="calcCalories()">Calculate</button>
                    <div id="calResult" class="result"></div>
                </div>

            </div>
        </div>
        <!-- STOPWATCH SECTION -->
        <div id="stopwatch" class="section">
            <h1>Stopwatch & HIIT</h1>

            <div class="card">
                <h2>Stopwatch</h2>
                <div id="swDisplay" style="font-size:24px; margin-bottom:10px;">00:00:00</div>
                <div style="display:flex; gap:10px;">
                    <button class="btn" onclick="swStart()">Start</button>
                    <button class="btn" onclick="swStop()">Stop</button>
                    <button class="btn" onclick="swReset()">Reset</button>
                </div>
            </div>

            <div class="card">
                <h2>HIIT Timer</h2>
                <label>Rounds</label>
                <input id="hiitRounds" class="input" type="number" value="6">
                <label>Work (sec)</label>
                <input id="hiitWork" class="input" type="number" value="30">
                <label>Rest (sec)</label>
                <input id="hiitRest" class="input" type="number" value="15">
                <div style="margin-top:10px;">
                    <button class="btn" onclick="startHIIT()">Start HIIT</button>
                    <button class="btn" onclick="stopHIIT()">Stop</button>
                </div>
                <div id="hiitDisplay" style="margin-top:10px;font-weight:bold;"></div>
            </div>
        </div>

        <!-- BOT / AI SECTION -->
        <div id="bot" class="section">
            <h1>GYMora AI Bot</h1>

            <div class="card">
                <div id="chatBox" style="height:240px; overflow:auto; background:#0b1220; padding:10px; border-radius:8px;"></div>
                <div style="display:flex; gap:10px; margin-top:10px;">
                    <input id="botInput" class="input" placeholder="Ask about workouts, diet, supplements...">
                    <button class="btn" onclick="botSend()">Send</button>
                </div>
            </div>

            <div class="card">
                <h2>Protein Guide</h2>
                <div id="proteinList"></div>
            </div>
        </div>

        <!-- FOOTER AREA inside main -->
        <div style="height:40px"></div>

    </div> <!-- end main -->
</div> <!-- end container -->

<!-- small helper modal area -->
<div id="modalRoot" style="display:none;"></div>

<script>
/* -----------------------
   Basic helpers & storage
   ----------------------- */
const storage = {
    get(k, fallback){
        try{ const v = localStorage.getItem(k); return v ? JSON.parse(v) : fallback; } catch(e){ return fallback; }
    },
    set(k, v){ try{ localStorage.setItem(k, JSON.stringify(v)); }catch(e){} }
};

function showSection(id){
    document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
    const el = document.getElementById(id);
    if(el) el.classList.add('active');
}

/* -----------------------
   BMI & Calories
   ----------------------- */
function calcBMI(){
    const w = Number(document.getElementById('bmiWeight').value);
    const h = Number(document.getElementById('bmiHeight').value);
    if(!w || !h){ document.getElementById('bmiResult').innerText = 'Enter values'; return; }
    const bmi = (w / ((h/100)*(h/100))).toFixed(1);
    document.getElementById('bmiResult').innerText = `BMI: ${bmi}`;
}

function calcCalories(){
    const w = Number(document.getElementById('calWeight').value);
    const h = Number(document.getElementById('calHeight').value);
    const age = Number(document.getElementById('calAge').value);
    if(!w || !h || !age){ document.getElementById('calResult').innerText = 'Fill all fields'; return; }
    // simple Mifflin-St Jeor for male default (approx)
    const bmr = 10*w + 6.25*h - 5*age + 5;
    const maintenance = Math.round(bmr * 1.55);
    document.getElementById('calResult').innerText = `Maintenance ‚âà ${maintenance} kcal/day`;
}

/* -----------------------
   Stopwatch
   ----------------------- */
let swInterval = null, swSec = 0;
function formatTime(t){
    const h = Math.floor(t/3600), m = Math.floor((t%3600)/60), s = t%60;
    return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}
function swStart(){
    if(swInterval) return;
    swInterval = setInterval(()=>{ swSec++; document.getElementById('swDisplay').innerText = formatTime(swSec); }, 1000);
}
function swStop(){ clearInterval(swInterval); swInterval = null; }
function swReset(){ swStop(); swSec = 0; document.getElementById('swDisplay').innerText = formatTime(swSec); }

/* -----------------------
   HIIT timer
   ----------------------- */
let hiitTimer = null;
function startHIIT(){
    const rounds = Number(document.getElementById('hiitRounds').value) || 6;
    const work = Number(document.getElementById('hiitWork').value) || 30;
    const rest = Number(document.getElementById('hiitRest').value) || 15;
    let state = { round:1, phase:'WORK', secs: work, rounds, work, rest };
    document.getElementById('hiitDisplay').innerText = `Round 1/${rounds} ‚Äî WORK ${work}s`;
    hiitTimer = setInterval(()=>{
        state.secs--;
        if(state.secs <= 0){
            if(state.phase === 'WORK'){ state.phase = 'REST'; state.secs = state.rest; }
            else { state.round++; if(state.round > rounds){ stopHIIT(); document.getElementById('hiitDisplay').innerText = 'Complete'; return; } state.phase = 'WORK'; state.secs = state.work; }
        }
        document.getElementById('hiitDisplay').innerText = `Round ${state.round}/${rounds} ‚Äî ${state.phase} ${state.secs}s`;
    }, 1000);
}
function stopHIIT(){ clearInterval(hiitTimer); hiitTimer = null; document.getElementById('hiitDisplay').innerText = 'Stopped'; }

/* -----------------------
   Simple Bot (rule-based)
   ----------------------- */
const botKB = [
    {keys:['protein','whey','supplement'], reply:'Good protein sources: chicken, eggs, whey, yogurt, lentils. Aim ~1.6-2.2g/kg.'},
    {keys:['calorie','calories','maintenance'], reply:'Maintenance calories depend on weight/height/activity. Use the calorie calculator.'},
    {keys:['beginner','start'], reply:'Start with 3 full-body workouts/week: squats, press, row, hinge, core.'},
    {keys:['hiit','timer','stopwatch'], reply:'Use the built-in HIIT timer. Try 30/15 work/rest for 6 rounds to start.'},
    {keys:['default'], reply:'I can help with workouts, timers, and simple diet tips. Ask "protein" or "calories".'}
];

function botSend(){
    const qEl = document.getElementById('botInput');
    const q = (qEl.value || '').trim();
    if(!q) return;
    const box = document.getElementById('chatBox');
    const u = document.createElement('div'); u.style.alignSelf='flex-end'; u.style.margin='6px 0'; u.style.background='#181a1f'; u.style.padding='8px'; u.style.borderRadius='8px'; u.innerText = q;
    box.appendChild(u);
    qEl.value = '';
    // match
    const lc = q.toLowerCase();
    let answer = botKB.find(x=> x.keys.some(k=> lc.includes(k)));
    if(!answer) answer = botKB.find(x=> x.keys.includes('default'));
    const a = document.createElement('div'); a.style.alignSelf='flex-start'; a.style.margin='6px 0'; a.style.background='#0b1220'; a.style.padding='8px'; a.style.borderRadius='8px'; a.innerText = answer.reply;
    box.appendChild(a);
    box.scrollTop = box.scrollHeight;
}

/* -----------------------
   Protein list render
   ----------------------- */
const proteinList = [
    {name:'Chicken breast (100g)', p:31},
    {name:'Egg (1 large)', p:6},
    {name:'Greek Yogurt (100g)', p:10},
    {name:'Lentils (100g cooked)', p:9},
    {name:'Whey (1 scoop)', p:24},
];
function renderProtein(){
    const node = document.getElementById('proteinList');
    node.innerHTML = proteinList.map(i=>`<div style="padding:8px 0;border-bottom:1px solid #111">${i.name} ‚Äî <strong>${i.p}g</strong></div>`).join('');
}
renderProtein();
  /* -----------------------
   THEME (Dark / Light)
   ----------------------- */
let theme = storage.get('theme', 'dark');

function applyTheme(){
    if(theme === 'light'){
        document.body.style.background = '#f4f4f4';
        document.body.style.color = '#000';

        document.querySelectorAll('.card').forEach(c=>{
            c.style.background = '#ffffff';
            c.style.color = '#000';
            c.style.border = '1px solid #ddd';
        });

        document.querySelectorAll('.sidebar').forEach(s=>{
            s.style.background = '#e5e7eb';
        });

        document.querySelectorAll('.btn').forEach(b=>{
            b.style.background = '#4f46e5';
            b.style.color = '#fff';
        });

    } else {
        // DARK
        document.body.style.background = '#0d1117';
        document.body.style.color = '#fff';

        document.querySelectorAll('.card').forEach(c=>{
            c.style.background = '#111827';
            c.style.color = '#fff';
            c.style.border = '1px solid #1f2937';
        });

        document.querySelectorAll('.sidebar').forEach(s=>{
            s.style.background = '#111827';
        });

        document.querySelectorAll('.btn').forEach(b=>{
            b.style.background = '#6366f1';
            b.style.color = '#fff';
        });
    }
    storage.set('theme', theme);
}

function toggleTheme(){
    theme = theme === 'dark' ? 'light' : 'dark';
    applyTheme();
}

applyTheme();

/* -----------------------
   BUTTON CLICK ANIMATION
   ----------------------- */
document.querySelectorAll('button').forEach(btn=>{
    btn.addEventListener('click', ()=>{
        btn.style.transform = 'scale(0.90)';
        setTimeout(()=> btn.style.transform = 'scale(1)', 120);
    });
});

/* -----------------------
   Smooth Section Fade
   ----------------------- */
document.querySelectorAll('.section').forEach(sec=>{
    sec.style.transition = '0.3s';
});/* -----------------------
   Save profile (from calculator)
   ----------------------- */
function saveProfile(){
    const h = Number(document.getElementById('height')?.value || document.getElementById('bmiHeight')?.value) || null;
    const w = Number(document.getElementById('weight')?.value || document.getElementById('bmiWeight')?.value) || null;
    const age = Number(document.getElementById('age')?.value || document.getElementById('calAge')?.value) || null;
    const gender = (document.getElementById('gender')?.value) || 'male';
    const activity = Number(document.getElementById('activity')?.value) || 1.55;

    const p = { name: storage.get('gymora_profile', {name:'Ali'}).name || 'Ali', height: h, weight: w, age, gender, activity };
    storage.set('gymora_profile', p);
    profile = p;
    toast('Profile saved');
    // Refresh daily plan with new data
    try{ generateDailyPlan(); }catch(e){}
}

/* -----------------------
   Logs (workout / simple)
   ----------------------- */
function loadLogs(){
    const logs = storage.get('gymora_logs', []);
    const tbody = document.querySelector('#logTable tbody');
    if(!tbody) return;
    tbody.innerHTML = '';
    logs.slice().reverse().forEach(l=>{
        const tr = document.createElement('tr');
        tr.innerHTML = `<td>${l.date}</td><td>${l.workout}</td><td>${l.note||''}</td>`;
        tbody.appendChild(tr);
    });
}
loadLogs();

function addLog(){
    const note = document.getElementById('logNote')?.value || '';
    const logs = storage.get('gymora_logs', []);
    logs.push({ date: new Date().toLocaleString(), workout: document.querySelector('#presetView')?.innerText || 'Manual', note });
    storage.set('gymora_logs', logs);
    try{ document.getElementById('logNote').value = ''; }catch(e){}
    loadLogs();
    toast('Log saved');
}

/* -----------------------
   Export / Import (backup)
   ----------------------- */
function exportData(){
    const data = {
        profile: storage.get('gymora_profile', {}),
        logs: storage.get('gymora_logs', []),
        weights: storage.get('gymora_weights', [])
    };
    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'gymora-backup.json';
    document.body.appendChild(a);
    a.click();
    a.remove();
    URL.revokeObjectURL(url);
    toast('Exported');
}

function importData(){
    const input = document.createElement('input');
    input.type = 'file';
    input.accept = 'application/json';
    input.onchange = (e)=>{
        const f = e.target.files[0];
        if(!f) return;
        const reader = new FileReader();
        reader.onload = (ev)=>{
            try{
                const obj = JSON.parse(ev.target.result);
                if(obj.profile) storage.set('gymora_profile', obj.profile);
                if(obj.logs) storage.set('gymora_logs', obj.logs);
                if(obj.weights) storage.set('gymora_weights', obj.weights);
                toast('Imported');
                setTimeout(()=> location.reload(), 600);
            }catch(err){
                toast('Import failed');
            }
        };
        reader.readAsText(f);
    };
    input.click();
}

/* -----------------------
   Small utilities & safety
   ----------------------- */
function toast(txt, ms=2000){
    const root = document.getElementById('toastRoot') || document.body;
    const d = document.createElement('div');
    d.className = 'toast';
    d.innerText = txt;
    d.style.opacity = 1;
    root.appendChild(d);
    setTimeout(()=>{ d.style.opacity = 0; d.style.transform = 'translateY(8px)'; }, ms-300);
    setTimeout(()=>{ try{ root.removeChild(d); }catch(e){} }, ms);
}

/* -----------------------
   Quick bindings on load
   ----------------------- */
(function finalInit(){
    // populate small helpers if present
    try{
        const prof = storage.get('gymora_profile', null);
        if(prof){
            if(document.getElementById('bmiHeight')) document.getElementById('bmiHeight').value = prof.height || '';
            if(document.getElementById('bmiWeight')) document.getElementById('bmiWeight').value = prof.weight || '';
            if(document.getElementById('calWeight')) document.getElementById('calWeight').value = prof.weight || '';
            if(document.getElementById('calHeight')) document.getElementById('calHeight').value = prof.height || '';
            if(document.getElementById('calAge')) document.getElementById('calAge').value = prof.age || '';
        }
    }catch(e){}
    // ensure sections nav works if user used button click (some buttons use onclick)
    document.querySelectorAll('.sidebar button').forEach(b=>{
        // keep existing handlers; add safe fallback
        b.addEventListener('touchstart', ()=> b.classList.add('active'));
        b.addEventListener('touchend', ()=> b.classList.remove('active'));
    });
    // final log load
    try{ loadLogs(); }catch(e){}
})();

/* -----------------------
   End of JS
   ----------------------- */
</script>
</body>
</html>
